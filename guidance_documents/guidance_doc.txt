# CHANGELOG

## 2026-01-08: Policy Input Augmentation for Collider Resolution

### Problem: Agent Blindness to Mechanism Failure
We identified that the "Collapse to X1" and failure to learn the Collider (X3) persisted because the Agent Policy was effectively blind.
- **Blindness:** The `StateEncoder` only received input weights (`w_mag`) and node indices. It had **zero information** about the actual validation loss or failure state of specific nodes.
- **Consequence:** The agent could not learn rules like "If X3 is failing, intervene on its parent X2". It relied solely on DPO training signals (rewards/bonuses) which were unstable due to negative rewards from distribution shifts.
- **Negative Reward Loop:** Intervening on X2 (correctly) often caused a temporary spike in loss (negative reward) as the model adjusted from its collinear local minimum. This actively discouraged the correct behavior.

### Solution: State Augmentation & Reward Shaping
We implemented a fundamental upgrade to the Agent's perception and reward function:
1.  **Augmented State Encoder:**
    - Injected per-node **Validation Loss** directly into the input feature vector.
    - New State: `[w_mag, uncert, val_loss, node_idx]`.
    - Impact: The policy can now explicitly "see" which nodes are broken.

2.  **LLM Prompt Enhancement:**
    - Updated the text prompt for LLM policies to include `Losses: [X1: 0.1, X2: 4.5, ...]`.

3.  **Reward Clipping:**
    - Modified `calculate_reward` to clip negative rewards to `-2.0` (previously `-10.0`).
    - Impact: Reduces the punishment for "hard" experiments that cause temporary instability, preventing the agent from becoming risk-averse.

### Expected Outcome
- **Intelligent Targeting:** The agent should learn to target parents of high-loss nodes (e.g., target X2 when X3 loss is high).
- **Collider Resolution:** With the ability to perceive X3's failure and the reduced penalty for instability, the agent should persistently intervene on X2 until X3 is solved.

## 2026-01-03: Fast Adaptation Phase to Fix Reward Misattribution
...
